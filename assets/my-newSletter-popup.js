var r=Object.defineProperty;var n=(t,e,i)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>n(t,typeof e!="symbol"?e+"":e,i);import{i as h,x as a}from"./lit-element.js";class o extends h{constructor(){super(),this.displayMode="enable",this.showInHome=!0,this.showForVisitor=!0,this.delay=3,this.expired=7,this.expiredTimeStamp=0,this.open=!1,this.timeId=null,this.storageKey="newsletter-popup-expired"}connectedCallback(){super.connectedCallback(),this.overlayDom=this.querySelector(".overlay"),this.containerDom=querySelector(".newsletter-container"),this.init()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.timeId)}init(){this.isExpired()&&(this.expiredTimeStamp=Date.now()+this.expired*24*60*60*1e3,localStorage.setItem(this.storageKey,this.expiredTimeStamp)),this.judgeShow()&&(this.timeId=setTimeout(()=>{this.show()},this.delay*1e3))}isExpired(){const e=Number(localStorage.getItem(this.storageKey)),i=Date.now();return!e||i>e}judgeShow(){return!(this.displayMode=="enable"&&(!this.showInHome||!this.showForVisitor||!this.isExpired()))}show(){this.open=!0,this.setAttribute("open")}hide(){this.open=!1,this.removeAttribute("open")}render(){return a`<slot></slot>`}}s(o,"properties",{displayMode:{type:String},showInHome:{type:Boolean},showForVisitor:{type:Boolean},delay:{type:Number},expired:{type:Number}});customElements.define("newsletter-popup",o);
