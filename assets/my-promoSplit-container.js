var _=Object.defineProperty;var w=(i,n,e)=>n in i?_(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e;var u=(i,n,e)=>w(i,typeof n!="symbol"?n+"":n,e);import{i as S,x as v}from"./lit-element.js";const E="modulepreload",x=function(i){return"/"+i},p={},g=function(n,e,s){let t=Promise.resolve();if(e&&e.length>0){let a=function(o){return Promise.all(o.map(l=>Promise.resolve(l).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),m=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));t=a(e.map(o=>{if(o=x(o),o in p)return;p[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":E,l||(d.as="script"),d.crossOrigin="",d.href=o,m&&d.setAttribute("nonce",m),document.head.appendChild(d),l)return new Promise((f,y)=>{d.addEventListener("load",f),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}function h(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return t.then(a=>{for(const r of a||[])r.status==="rejected"&&h(r.reason);return n().catch(h)})};class b extends S{constructor(){super();u(this,"_mySwiper",null);u(this,"_mq",null);u(this,"_productIndex",1);this.overlay_texts.forEach(e=>{e.addEventListener("click",()=>{this._productIndex=Number(e.dataset.index),this.products.forEach(s=>{s.style.display=Number(s.dataset.index)==this._productIndex?"block":"none"})})}),this.addToCartBtn.addEventListener("click",()=>{this.handleAddToBtnClick()})}get overlay_texts(){return this.querySelectorAll(".overlay-text")}get products(){return this.querySelectorAll(".product-selected")}get addToCartBtn(){return this.querySelector(".add-to-cart-btn")}firstUpdated(){this._mq=window.matchMedia("(max-width: 768px)"),this.handleMediaChange(this._mq),this._mq.addEventListener("change",e=>this.handleMediaChange(e))}handleAddToBtnClick(){const e=Array.from(this.products).find(t=>Number(t.dataset.index??0)==this._productIndex),s=Array.from(e.querySelectorAll(".product-item")).map(t=>Number(t.dataset.productId));fetch(routes.cart_add_url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s.map(t=>({id:Number(t),quantity:1}))})}).then(t=>{window.location.href="/cart"}).catch(t=>{console.error(t)})}handleMediaChange(e){e.matches?this._mySwiper||g(async()=>{const{Swiper:s}=await import("./swiper.js").then(t=>t.f);return{Swiper:s}},[]).then(({Swiper:s})=>{this._mySwiper=new s(this.querySelector(".swiper"),{slidesPerView:"auto",centeredSlides:!0,freeMode:!0})}):this._mySwiper&&(this._mySwiper.destroy(!0,!0),this._mySwiper=null)}render(){return v`<slot></slot>`}}customElements.define("my-promo-split-container",b);
