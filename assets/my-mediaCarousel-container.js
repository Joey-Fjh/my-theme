var a=Object.defineProperty;var d=(r,e,t)=>e in r?a(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var n=(r,e,t)=>d(r,typeof e!="symbol"?e+"":e,t);import{i as c,a as u,x as p}from"./lit-element.js";import{S as h}from"./swiper.js";import{N as y}from"./navigation.js";import"./create-element-if-not-defined.js";class l extends c{constructor(){super(),this.initIndex=0}get _container(){return this.querySelector(".carousel-container")}get _wrapper(){return this.querySelector(".carousel-wrapper")}get _slides(){return this.querySelectorAll(".carousel-slide")}get _prev(){return this.querySelector(".prev-btn")}get _next(){return this.querySelector(".next-btn")}get _dots(){return this.querySelector(".carousel-dots")}get _playBtns(){return this.querySelectorAll(".play-button")}initStatus(){this._slides[this.initIndex].classList.add("center")}initVideoPlayer(){const e=this.querySelectorAll('[id^="Deferred-Poster-"]');e.length&&e.forEach(t=>{t.addEventListener("click",s=>{this.loadContent(s.currentTarget.parentElement)})})}loadContent(e,t=!0){if(window.pauseAllMedia(),!e.getAttribute("loaded")){const s=document.createElement("div");s.appendChild(e.querySelector("template").content.firstElementChild.cloneNode(!0)),e.setAttribute("loaded",!0);const i=e.appendChild(s.querySelector("video, model-viewer, iframe"));t&&i.focus(),i.nodeName=="VIDEO"&&i.getAttribute("autoplay")&&i.play();const o=i.getAttribute("style");i.setAttribute("style","display: block;"),window.setTimeout(()=>{i.setAttribute("style",o)},0)}}connectedCallback(){if(super.connectedCallback(),this._slides.length==0)return;this.initIndex=Math.floor(this._slides.length/2),this.initStatus(),this.initVideoPlayer();let e=new h(this._container,{modules:[y],slidesPerView:"auto",spaceBetween:30,loop:!0,centeredSlides:!0,slideToClickedSlide:!0,initialSlide:this.initIndex,navigation:{nextEl:this._next,prevEl:this._prev},pagination:{el:".swiper-pagination",clickable:!0}});e.on("slideChangeTransitionEnd",()=>{e.slides.forEach(t=>{t.classList.remove("center")}),e.slides.find(t=>t.classList.contains("swiper-slide-active")).classList.add("center")})}render(){return p`<slot></slot>`}}n(l,"properties",{initIndex:{type:Number,state:!0}}),n(l,"styles",[u`
            :host {
				display: block;
				width: 100%;
				height: 100%;
				position: relative;
			}
        `]);customElements.define("my-media-carousel-container",l);
