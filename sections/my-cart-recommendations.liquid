{{ 'my-cart-recommendations.css' | asset_url | stylesheet_tag  }}
{{ 'my-product-card.css' | asset_url | stylesheet_tag }}
{{ 'my-swiper-container.css' | asset_url | stylesheet_tag }}

<script src="{{ 'my-cart-recommendations-container.js' | asset_url }}" type="module"></script>
<script src="{{ 'quick-add.js' | asset_url }}" defer="defer"></script>

{%- liquid
    assign has_quick_add = false
    if section.settings.quick_add == 'standard'
        assign has_quick_add = true
    endif
-%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<responsive-container class="my-cart-recommendations__container color-{{ section.settings.color_scheme }} section-{{ section.id }}-padding">
    <div class="top text-{{ section.settings.text_align }} my-page-width">
        <h1 class="title inline-richtext {{ section.settings.heading_size }}">{{ section.settings.title }}</h1>
    </div>

    <my-cart-recommendations-container class="my-swiper-container {% unless section.settings.full_width %} my-page-width {% endunless %}">
        <div class="swiper">
            <div class="swiper-wrapper bottom">   
                {% for product in section.settings.collection.products %}
                    {%- render 'my-product-card', 
                        product: product, 
                        has_quick_add: has_quick_add,
                        ratio: "3 / 4", 
                        show_secondary_image: section.settings.show_secondary_image,
                        is_swiper:true,
                        quick_add_modal:"#my-cart-recommendations-PopupModal" 
                    -%}    
                {% endfor %}
            </div>
        </div>
    </my-cart-recommendations-container>

    {%- if section.settings.collection != nil and section.settings.collection.products_count > 0 -%}
        <quick-add-modal
            id="my-cart-recommendations-PopupModal"
            class="cart-recommendations-modal"
        >
            <div
                role="dialog"
                aria-modal="true"
                class="content"
                tabindex="-1"
            >
                <button
                    id="ModalClose-"
                    type="button"
                    class="toggle-btn"
                    aria-label="close"
                >
                    {{ 'icon-close.svg' | inline_asset_content }}
                </button>
                <div id="QuickAddInfo-" class="content-info">
                </div>
            </div>
        </quick-add-modal>
    {%- endif -%}
</responsive-container>

{% schema %}
  {
    "name": "my-cart-recommendations",
    "tag": "section",
    "class": "section",
    "settings": [
        {
            "type": "color_scheme",
            "id": "color_scheme",
            "label": "Color Scheme",
            "default": "scheme-1"
        },
        {
            "type": "collection",
            "id": "collection",
            "label": "Collection"
        },
        {
            "type": "header",
            "content": "Text"
        }, 
        {
            "type": "inline_richtext",
            "id": "title",
            "label": "Title",
            "default":"You'll Love This Too"
        },
        {
            "type": "select",
            "id": "heading_size",
            "options": [
                {
                "value": "h2",
                "label": "small"
                },
                {
                "value": "h1",
                "label": "medium"
                },
                {
                "value": "h0",
                "label": "large"
                },
                {
                "value": "hxl",
                "label": "xl"
                },
                {
                "value": "hxxl",
                "label": "xxl"
                }
            ],
            "default": "h1",
            "label": "Title Size"
        },
        {
            "type": "select",
            "id": "text_align",
            "label": "Text Align",
            "options": [
                {
                    "value": "left",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "right",
                    "label": "Right"
                }
            ],
            "default":"center"
        },
        {
            "type": "header",
            "content": "Product Collection Layout"
        },
        {
            "type": "range",
            "id": "columns_desktop",
            "min": 3,
            "max": 6,
            "step": 1,
            "default": 4,
            "label": "Columns Desktop"
        },
        {
            "type": "select",
            "id": "columns_mobile",
            "options": [
                {
                    "value": "1",
                    "label": "1"
                },
                {
                    "value": "2",
                    "label": "2"
                }
            ],
            "default": "2",
            "label": "Columns Mobile"
        },
        {
            "type": "checkbox",
            "id": "full_width",
            "label": "Full Width",
            "default": false
        },
        {
            "type": "header",
            "content": "Product Card"
        },
        {
            "type": "select",
            "id": "product_title_size",
            "label": "Product Title Size",
            "options": [
                {
                    "value": "h4",
                    "label": "Small"
                },
                {
                    "value": "h3",
                    "label": "Medium"
                },
                {
                    "value": "h2",
                    "label": "Large"
                }
            ],
            "default": "h3"
        },
        {
            "type": "checkbox",
            "id": "product_title_bold",
            "label": "Product Title Bold",
            "default": false
        },
        {
            "type": "checkbox",
            "id": "show_secondary_image",
            "default": false,
            "label": "When hover show secondary image"
        },
        {
            "type": "select",
            "id": "quick_add",
            "default": "none",
            "label": "Quick Add",
            "options": [
                {
                    "value": "none",
                    "label": "None"
                },
                {
                    "value": "standard",
                    "label": "Standard"
                }
            ]
        },
        {
            "type": "color_scheme",
            "id": "badge_color",
            "label": "Badge Color Scheme",
            "default": "scheme-1"
        },
        {
            "type": "checkbox",
            "id": "show_badge_text",
            "label": "Show Badge Text",
            "default": true
        },
        {
            "type": "inline_richtext",
            "id": "badge_text",
            "label": "Badge Text",
            "default":"BEST SELLER"
        },
        {
            "type": "select",
            "id": "show_operation",
            "label": "Show Operation",
            "options": [
                {
                    "value": "none",
                    "label": "None"
                },
                {
                    "value": "hover",
                    "label": "Hover"
                }
            ],
            "default": "none"
        },
        {
            "type": "select",
            "id":"alignment",
            "label": "Alignment",
            "options": [
                {
                    "value": "left",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "right",
                    "label": "Right"
                }
            ],
            "default":"center"
        },
        {
            "type": "text",
            "id": "color_swatch_trigger",
            "label": "Color Swatch Trigger",
            "info": "Define which is the color option.Separate by a comma.Eg.Color",
            "default": "Color"
        },
        {
            "type": "text",
            "id": "size_trigger",
            "label": "Size 尺寸",
            "info": "Define which is the size option.Separate by a comma.Eg.Size",
            "default": "Size"
        },
        {
            "type": "header",
            "content": "Padding"
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 100,
            "step": 4,
            "unit": "px",
            "label": "Padding Top",
            "default": 36
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 100,
            "step": 4,
            "unit": "px",
            "label": "Padding Bottom",
            "default": 36
        }
    ],
    "presets": [
      {
        "name": "my-cart-recommendations"
      }
    ]
  }
{% endschema %}